<!DOCTYPE html>
<html lang="en-US">
    <head>
        <meta charset="UTF-8">
        <meta http-equiv="X-UA-Compatible" content="IE=edge">
        <meta name="viewport" content="width=device-width, initial-scale=1">
<!-- Begin Jekyll SEO tag v2.8.0 -->
<meta name="generator" content="Jekyll v3.9.3" />
<meta property="og:locale" content="en_US" />
<link rel="canonical" href="http://localhost:4000/" />
<meta property="og:url" content="http://localhost:4000/" />
<meta property="og:type" content="website" />
<meta name="twitter:card" content="summary" />
<script type="application/ld+json">
{"@context":"https://schema.org","@type":"WebSite","url":"http://localhost:4000/"}</script>
<!-- End Jekyll SEO tag -->
<link rel="preload" href="https://use.fontawesome.com/releases/v5.7.2/css/all.css" as="style" crossorigin="anonymous" integrity="sha384-fnmOCqbTlWIlj8LyTjo7mOUStjsKC4pOpQbqyi7RrhN7udi9RwhKkMHpvLbHG9Sr">
        <link rel="stylesheet" href="https://eecs485staff.github.io/primer-spec/assets/v1.10/css/primer-spec-base.css">

        <!--
            This page is formatted using Primer Spec.
            Would you like to contribute to the theme?
            Check out: https://github.com/eecs485staff/primer-spec
        -->
        <script>
            window.PrimerSpecConfig = {
                pdfPath: null, // @managed by build-primer-spec-action
                siteQualifiedBaseUrl: 'http://localhost:4000/',
                hideSidebarOnLoad: false,
                disableSidebar: false,
                defaultSubthemeName: 'default',
                defaultSubthemeMode: 'system',
                sitemapEnabled: false,
                sitemapUrls: [],
                sitemapLabel: undefined,
                sitemapSiteTitle: '',
                useLegacyCodeBlocks: false,
                defaultCodeblockVariant: "enhanced",
                disableJokes: false
            };
        </script>
        <script src="https://eecs485staff.github.io/primer-spec/assets/v1.10/js/primer_spec_plugin.min.js" crossorigin="anonymous" defer></script>
    </head>
    <body>
        <div id="primer-spec-top"></div>
        <div id="primer-spec-app-container" onclick="return true;"></div>

        <div id="primer-spec-plugin-main-content">
            

            <h1 id="what-do-we-think-of-the-recipes"><a href="https://github.com/tawseef-rahman/recipes-data-analysis">What Do We Think of the Recipes?</a></h1>

<p><br />
<br />
By
<br />
<a href="https://www.tawseefrahman.com">Tawseef Rahman</a>
<br />
<a href="mailto:tawseefr@umich.edu">tawseefr@umich.edu</a></p>

<p>This is my work for the Final Project in the EECS 398: Practical Data Science course at the University of Michigan - Ann Arbor.</p>

<p>In this project, I take a look at a recipes dataset. I will…</p>

<ul>
  <li>propose a research question</li>
  <li>clean the dataset</li>
  <li>display plots of univariate analysis</li>
  <li>display plots of bivariate analysis</li>
  <li>propose a prediction problem</li>
  <li>train a baseline model</li>
  <li>tune my baseline model to create a final model</li>
</ul>

<h2 id="introduction">Introduction</h2>

<h3 id="introduction-and-question-identification">Introduction and Question Identification</h3>

<h4 id="question-and-reasoning">Question and Reasoning</h4>

<p>The question that I am investigating in my project is:</p>

<blockquote>
  <p>Do recipes with more reviews (<code class="language-plaintext highlighter-rouge">review</code> count) have a higher average rating (<code class="language-plaintext highlighter-rouge">avg_rating</code>)?</p>
</blockquote>

<p>Understanding this relationship could help users make more informed decisions when selecting recipes. If there is a strong correlation between the number of reviews and the average rating, it may suggest that popular recipes tend to be better received - or that crowd consensus leads to more accurate ratings over time. This insight could also benefit food bloggers, content creators, and developers of food recommendation systems.</p>

<h4 id="about-the-dataset">About the Dataset</h4>

<p>The dataset I’m using contains information on <strong>234,429</strong> recipes and their reviews, compiled into a single DataFrame named <code class="language-plaintext highlighter-rouge">merged_recipes_df</code>. This DataFrame includes a wide range of features related to recipe content, nutrition, user information, and review data.</p>

<p>The DataFrame <code class="language-plaintext highlighter-rouge">merged_recipes_df</code> contains the following columns:</p>

<ul>
  <li><code class="language-plaintext highlighter-rouge">name</code> (string): The name of a recipe</li>
  <li><code class="language-plaintext highlighter-rouge">id</code> (int): The ID number corresponding to a recipe</li>
  <li><code class="language-plaintext highlighter-rouge">minutes</code> (int): The length of time (in minutes) it takes to cook the recipe</li>
  <li><code class="language-plaintext highlighter-rouge">contributor_id</code> (int): The ID number for the author of the recipe post</li>
  <li><code class="language-plaintext highlighter-rouge">submitted</code> (YYYY-MM-DD): The date when a recipe post was published</li>
  <li><code class="language-plaintext highlighter-rouge">tags</code> (list of strings): Relevant tags related to the recipe post</li>
  <li><code class="language-plaintext highlighter-rouge">n_steps</code> (int): The number of steps in the recipe</li>
  <li><code class="language-plaintext highlighter-rouge">steps</code> (list of strings): The steps used to cook the recipe</li>
  <li><code class="language-plaintext highlighter-rouge">description</code> (string): A description of the recipe</li>
  <li><code class="language-plaintext highlighter-rouge">ingredients</code> (list of strings): All the ingredients for the recipe</li>
  <li><code class="language-plaintext highlighter-rouge">n_ingredients</code> (int): The number of ingredients for a recipe</li>
  <li><code class="language-plaintext highlighter-rouge">calories</code> (int): The number of calories for a recipe</li>
  <li><code class="language-plaintext highlighter-rouge">total_fat_PDV</code> (float): The percentage of daily value of total fat in a recipe</li>
  <li><code class="language-plaintext highlighter-rouge">sugar_PDV</code> (float): The percentage of daily value of sugar in a recipe</li>
  <li><code class="language-plaintext highlighter-rouge">sodium_PDV</code> (float): The percentage of daily value of sodium in a recipe</li>
  <li><code class="language-plaintext highlighter-rouge">protein_PDV</code> (float): The percentage of daily value of protein in a recipe</li>
  <li><code class="language-plaintext highlighter-rouge">saturated_fat_PDV</code> (float): The percentage of daily value of saturated fat in a recipe</li>
  <li><code class="language-plaintext highlighter-rouge">carbohydrates_PDV</code> (float): The percentage of daily value of carbohydrates in a recipe</li>
  <li><code class="language-plaintext highlighter-rouge">user_id</code> (int): The ID number for the author of the review poster</li>
  <li><code class="language-plaintext highlighter-rouge">recipe_id</code> (int): The ID number for the recipe for the corresponding review post</li>
  <li><code class="language-plaintext highlighter-rouge">date</code> (YYYY-MM-DD): The date of the review post</li>
  <li><code class="language-plaintext highlighter-rouge">rating</code> (float): The rating (1, inclusive to 5, inclusive) of a review</li>
  <li><code class="language-plaintext highlighter-rouge">review</code> (string): The actual review</li>
  <li><code class="language-plaintext highlighter-rouge">avg_rating</code> (float): The average value of ratings for a recipe</li>
  <li><code class="language-plaintext highlighter-rouge">year</code> (int): The year a recipe post was published</li>
</ul>

<h2 id="data-cleaning-and-exploratory-data-analysis">Data Cleaning and Exploratory Data Analysis</h2>

<h3 id="data-cleaning">Data Cleaning</h3>

<h4 id="data-cleaning-and-preparation">Data Cleaning and Preparation</h4>

<p>Before analyzing the relationship between review count and average rating, it was essential for me to clean and preprocess the raw data. The original <code class="language-plaintext highlighter-rouge">RAW_recipes.csv</code> dataset contains metadata and nutritional information for each recipe. The original <code class="language-plaintext highlighter-rouge">RAW_interactions.csv</code> dataset contains individual user interactions, including ratings and written reviews. These raw datasets contained a variety of formats and inconsistencies that needed to be addressed before performing any meaningful analysis.</p>

<ol>
  <li>Loading the Datasets
<br />
a. I started by loading both datasets using <code class="language-plaintext highlighter-rouge">pandas</code>.</li>
  <li>Converting and Expanding the Nutrition Data
<br />
a. In <code class="language-plaintext highlighter-rouge">RAW_recipes.csv</code>, the <code class="language-plaintext highlighter-rouge">nutrition</code> column is stored as a string representation of a list. To analyze nutritional content, I needed to convert the string representation of a list into an actual list and separate that list into meaningful components.
<br />
b. I applied the <code class="language-plaintext highlighter-rouge">eval()</code> function to transform the string into a Python list.
<br />
c. I then expanded this list into individual nutrition columns: <code class="language-plaintext highlighter-rouge">calories</code>, <code class="language-plaintext highlighter-rouge">total_fat_PDV</code>, <code class="language-plaintext highlighter-rouge">sugar_PDV</code>, <code class="language-plaintext highlighter-rouge">sodium_PDV</code>, <code class="language-plaintext highlighter-rouge">protein_PDV</code>, <code class="language-plaintext highlighter-rouge">saturated_fat_PDV</code>, and <code class="language-plaintext highlighter-rouge">carbohydrates_PDV</code>.
<br />
d. Step 2c. enabled me to treat nutritional data as structured numerical values, making it possible to include them in future quantitative analyses or visualizations.</li>
  <li>Merging Recipe and Interaction Data
<br />
a. I then joined the <code class="language-plaintext highlighter-rouge">RAW_recipes.csv</code> dataset and the <code class="language-plaintext highlighter-rouge">RAW_interactions.csv</code> dataset using a <strong>left join</strong> on <code class="language-plaintext highlighter-rouge">id</code> from the <code class="language-plaintext highlighter-rouge">RAW_recipes.csv</code> dataset and <code class="language-plaintext highlighter-rouge">recipe_id</code> from the <code class="language-plaintext highlighter-rouge">RAW_interactions.csv</code> dataset. This data merging step on the two datasets preserved all recipe entries, even those without user interactions.
<br />
b. Step 3a. connected user-generated ratings and reviews to specific recipes, allowing me to measure popularity (<code class="language-plaintext highlighter-rouge">review</code> count) and perceived quality (<code class="language-plaintext highlighter-rouge">avg_rating</code>) for each recipe.</li>
  <li>Handling Invalid Ratings
<br />
a. Some ratings in the merged dataset had a value of <code class="language-plaintext highlighter-rouge">0</code>, which is not a valid rating on a typical 1-5 scale. These entries were likely due to user error or placeholder values; I replaced the <code class="language-plaintext highlighter-rouge">0</code> values with <code class="language-plaintext highlighter-rouge">NaN</code> to prevent skewing the results.
<br />
b. Step 4a. ensured that the average rating calculations were accurate and not artificially deflated by invalid scores.</li>
  <li>Calculating Average Rating Per Recipe
<br />
a. I then calculated the mean rating for each recipe using the cleaned ratings and merged this value back into the main dataset as a new column, <code class="language-plaintext highlighter-rouge">avg_rating</code>.
<br />
b. The <code class="language-plaintext highlighter-rouge">avg_rating</code> column is central to my project question. By aggregating this value for each recipe, I can copare it meaningfully to the number of reviews it received.</li>
  <li>Extracting the Year of Submission
<br />
a. The <code class="language-plaintext highlighter-rouge">date</code> column in the <code class="language-plaintext highlighter-rouge">RAW_interactions.csv</code> dataset records the timestamp of each interaction. I converted the date into a <code class="language-plaintext highlighter-rouge">year</code> column to make it easier for me to analyze trends over time.
<br />
b. Step 6a. allowed for temporal analyses - like examining whether newer recipes tend to receive higher ratings or more reviews.</li>
</ol>

<h4 id="head-of-the-cleaned-merged_recipes_df-dataframe"><code class="language-plaintext highlighter-rouge">head</code> of the Cleaned <code class="language-plaintext highlighter-rouge">merged_recipes_df</code> DataFrame</h4>

<p>Here’s the <code class="language-plaintext highlighter-rouge">head</code> of the cleaned <code class="language-plaintext highlighter-rouge">merged_recipes_df</code> DataFrame:</p>

<table>
  <thead>
    <tr>
      <th style="text-align: left">name</th>
      <th style="text-align: right">id</th>
      <th style="text-align: right">minutes</th>
      <th style="text-align: right">contributor_id</th>
      <th style="text-align: left">submitted</th>
      <th style="text-align: left">tags</th>
      <th style="text-align: right">n_steps</th>
      <th style="text-align: left">steps</th>
      <th style="text-align: left">description</th>
      <th style="text-align: left">ingredients</th>
      <th style="text-align: right">n_ingredients</th>
      <th style="text-align: right">calories</th>
      <th style="text-align: right">total_fat_PDV</th>
      <th style="text-align: right">sugar_PDV</th>
      <th style="text-align: right">sodium_PDV</th>
      <th style="text-align: right">protein_PDV</th>
      <th style="text-align: right">saturated_fat_PDV</th>
      <th style="text-align: right">carbohydrates_PDV</th>
      <th style="text-align: right">user_id</th>
      <th style="text-align: right">recipe_id</th>
      <th style="text-align: left">date</th>
      <th style="text-align: right">rating</th>
      <th style="text-align: left">review</th>
      <th style="text-align: right">avg_rating</th>
      <th style="text-align: right">year</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td style="text-align: left">1 brownies in the world best ever</td>
      <td style="text-align: right">333281</td>
      <td style="text-align: right">40</td>
      <td style="text-align: right">985201</td>
      <td style="text-align: left">2008-10-27</td>
      <td style="text-align: left">[‘60-minutes-or-less’, ‘time-to-make’, ‘course’, ‘main-ingredient’, ‘preparation’, ‘for-large-groups’, ‘desserts’, ‘lunch’, ‘snacks’, ‘cookies-and-brownies’, ‘chocolate’, ‘bar-cookies’, ‘brownies’, ‘number-of-servings’]</td>
      <td style="text-align: right">10</td>
      <td style="text-align: left">[‘heat the oven to 350f and arrange the rack in the middle’, ‘line an 8-by-8-inch glass baking dish with aluminum foil’, ‘combine chocolate and butter in a medium saucepan and cook over medium-low heat , stirring frequently , until evenly melted’, ‘remove from heat and let cool to room temperature’, ‘combine eggs , sugar , cocoa powder , vanilla extract , espresso , and salt in a large bowl and briefly stir until just evenly incorporated’, ‘add cooled chocolate and mix until uniform in color’, ‘add flour and stir until just incorporated’, ‘transfer batter to the prepared baking dish’, ‘bake until a tester inserted in the center of the brownies comes out clean , about 25 to 30 minutes’, ‘remove from the oven and cool completely before cutting’]</td>
      <td style="text-align: left">these are the most; chocolatey, moist, rich, dense, fudgy, delicious brownies that you’ll ever make…..sereiously! there’s no doubt that these will be your fav brownies ever for you can add things to them or make them plain…..either way they’re pure heaven!</td>
      <td style="text-align: left">[‘bittersweet chocolate’, ‘unsalted butter’, ‘eggs’, ‘granulated sugar’, ‘unsweetened cocoa powder’, ‘vanilla extract’, ‘brewed espresso’, ‘kosher salt’, ‘all-purpose flour’]</td>
      <td style="text-align: right">9</td>
      <td style="text-align: right">138.4</td>
      <td style="text-align: right">10</td>
      <td style="text-align: right">50</td>
      <td style="text-align: right">3</td>
      <td style="text-align: right">3</td>
      <td style="text-align: right">19</td>
      <td style="text-align: right">6</td>
      <td style="text-align: right">386585</td>
      <td style="text-align: right">333281</td>
      <td style="text-align: left">2008-11-19</td>
      <td style="text-align: right">4</td>
      <td style="text-align: left">These were pretty good, but took forever to bake. I would send it ended up being almost an hour! Even then, the brownies stuck to the foil, and were on the overly moist side and not easy to cut. They did taste quite rich, though! Made for My 3 Chefs.</td>
      <td style="text-align: right">4</td>
      <td style="text-align: right">2008</td>
    </tr>
    <tr>
      <td style="text-align: left">1 in canada chocolate chip cookies</td>
      <td style="text-align: right">453467</td>
      <td style="text-align: right">45</td>
      <td style="text-align: right">1848091</td>
      <td style="text-align: left">2011-04-11</td>
      <td style="text-align: left">[‘60-minutes-or-less’, ‘time-to-make’, ‘cuisine’, ‘preparation’, ‘north-american’, ‘for-large-groups’, ‘canadian’, ‘british-columbian’, ‘number-of-servings’]</td>
      <td style="text-align: right">12</td>
      <td style="text-align: left">[‘pre-heat oven the 350 degrees f’, ‘in a mixing bowl , sift together the flours and baking powder’, ‘set aside’, ‘in another mixing bowl , blend together the sugars , margarine , and salt until light and fluffy’, ‘add the eggs , water , and vanilla to the margarine / sugar mixture and mix together until well combined’, ‘add in the flour mixture to the wet ingredients and blend until combined’, ‘scrape down the sides of the bowl and add the chocolate chips’, ‘mix until combined’, ‘scrape down the sides to the bowl again’, ‘using an ice cream scoop , scoop evenly rounded balls of dough and place of cookie sheet about 1 - 2 inches apart to allow for spreading during baking’, ‘bake for 10 - 15 minutes or until golden brown on the outside and soft &amp; chewy in the center’, ‘serve hot and enjoy !’]</td>
      <td style="text-align: left">this is the recipe that we use at my school cafeteria for chocolate chip cookies. they must be the best chocolate chip cookies i have ever had! if you don’t have margarine or don’t like it, then just use butter (softened) instead.</td>
      <td style="text-align: left">[‘white sugar’, ‘brown sugar’, ‘salt’, ‘margarine’, ‘eggs’, ‘vanilla’, ‘water’, ‘all-purpose flour’, ‘whole wheat flour’, ‘baking soda’, ‘chocolate chips’]</td>
      <td style="text-align: right">11</td>
      <td style="text-align: right">595.1</td>
      <td style="text-align: right">46</td>
      <td style="text-align: right">211</td>
      <td style="text-align: right">22</td>
      <td style="text-align: right">13</td>
      <td style="text-align: right">51</td>
      <td style="text-align: right">26</td>
      <td style="text-align: right">424680</td>
      <td style="text-align: right">453467</td>
      <td style="text-align: left">2012-01-26</td>
      <td style="text-align: right">5</td>
      <td style="text-align: left">Originally I was gonna cut the recipe in half (just the 2 of us here), but then we had a park-wide yard sale, &amp; I made the whole batch &amp; used them as enticements for potential buyers ~ what the hey, a free cookie as delicious as these are, definitely works its magic! Will be making these again, for sure! Thanks for posting the recipe!</td>
      <td style="text-align: right">5</td>
      <td style="text-align: right">2012</td>
    </tr>
    <tr>
      <td style="text-align: left">412 broccoli casserole</td>
      <td style="text-align: right">306168</td>
      <td style="text-align: right">40</td>
      <td style="text-align: right">50969</td>
      <td style="text-align: left">2008-05-30</td>
      <td style="text-align: left">[‘60-minutes-or-less’, ‘time-to-make’, ‘course’, ‘main-ingredient’, ‘preparation’, ‘side-dishes’, ‘vegetables’, ‘easy’, ‘beginner-cook’, ‘broccoli’]</td>
      <td style="text-align: right">6</td>
      <td style="text-align: left">[‘preheat oven to 350 degrees’, ‘spray a 2 quart baking dish with cooking spray , set aside’, ‘in a large bowl mix together broccoli , soup , one cup of cheese , garlic powder , pepper , salt , milk , 1 cup of french onions , and soy sauce’, ‘pour into baking dish , sprinkle remaining cheese over top’, ‘bake for 25 minutes or until cheese is lightly browned’, ‘sprinkle with rest of french fried onions and bake until onions are browned and cheese is bubbly , about 10 more minutes’]</td>
      <td style="text-align: left">since there are already 411 recipes for broccoli casserole posted to “zaar” ,i decided to call this one #412 broccoli casserole.i don’t think there are any like this one in the database. i based this one on the famous “green bean casserole” from campbell’s soup. but i think mine is better since i don’t like cream of mushroom soup.submitted to “zaar” on may 28th,2008</td>
      <td style="text-align: left">[‘frozen broccoli cuts’, ‘cream of chicken soup’, ‘sharp cheddar cheese’, ‘garlic powder’, ‘ground black pepper’, ‘salt’, ‘milk’, ‘soy sauce’, ‘french-fried onions’]</td>
      <td style="text-align: right">9</td>
      <td style="text-align: right">194.8</td>
      <td style="text-align: right">20</td>
      <td style="text-align: right">6</td>
      <td style="text-align: right">32</td>
      <td style="text-align: right">22</td>
      <td style="text-align: right">36</td>
      <td style="text-align: right">3</td>
      <td style="text-align: right">29782</td>
      <td style="text-align: right">306168</td>
      <td style="text-align: left">2008-12-31</td>
      <td style="text-align: right">5</td>
      <td style="text-align: left">This was one of the best broccoli casseroles that I have ever made. I made my own chicken soup for this recipe. I was a bit worried about the tsp of soy sauce but it gave the casserole the best flavor. YUM!</td>
      <td style="text-align: right">5</td>
      <td style="text-align: right">2008</td>
    </tr>
    <tr>
      <td style="text-align: left"> </td>
      <td style="text-align: right"> </td>
      <td style="text-align: right"> </td>
      <td style="text-align: right"> </td>
      <td style="text-align: left"> </td>
      <td style="text-align: left"> </td>
      <td style="text-align: right"> </td>
      <td style="text-align: left"> </td>
      <td style="text-align: left"> </td>
      <td style="text-align: left"> </td>
      <td style="text-align: right"> </td>
      <td style="text-align: right"> </td>
      <td style="text-align: right"> </td>
      <td style="text-align: right"> </td>
      <td style="text-align: right"> </td>
      <td style="text-align: right"> </td>
      <td style="text-align: right"> </td>
      <td style="text-align: right"> </td>
      <td style="text-align: right"> </td>
      <td style="text-align: right"> </td>
      <td style="text-align: left"> </td>
      <td style="text-align: right"> </td>
      <td style="text-align: left">The photos you took (shapeweaver) inspired me to make this recipe and it actually does look just like them when it comes out of the oven.</td>
      <td style="text-align: right"> </td>
      <td style="text-align: right"> </td>
    </tr>
    <tr>
      <td style="text-align: left"> </td>
      <td style="text-align: right"> </td>
      <td style="text-align: right"> </td>
      <td style="text-align: right"> </td>
      <td style="text-align: left"> </td>
      <td style="text-align: left"> </td>
      <td style="text-align: right"> </td>
      <td style="text-align: left"> </td>
      <td style="text-align: left"> </td>
      <td style="text-align: left"> </td>
      <td style="text-align: right"> </td>
      <td style="text-align: right"> </td>
      <td style="text-align: right"> </td>
      <td style="text-align: right"> </td>
      <td style="text-align: right"> </td>
      <td style="text-align: right"> </td>
      <td style="text-align: right"> </td>
      <td style="text-align: right"> </td>
      <td style="text-align: right"> </td>
      <td style="text-align: right"> </td>
      <td style="text-align: left"> </td>
      <td style="text-align: right"> </td>
      <td style="text-align: left">Thanks so much for sharing your recipe shapeweaver. It was wonderful! Going into my family’s favorite Zaar cookbook :)</td>
      <td style="text-align: right"> </td>
      <td style="text-align: right"> </td>
    </tr>
    <tr>
      <td style="text-align: left">412 broccoli casserole</td>
      <td style="text-align: right">306168</td>
      <td style="text-align: right">40</td>
      <td style="text-align: right">50969</td>
      <td style="text-align: left">2008-05-30</td>
      <td style="text-align: left">[‘60-minutes-or-less’, ‘time-to-make’, ‘course’, ‘main-ingredient’, ‘preparation’, ‘side-dishes’, ‘vegetables’, ‘easy’, ‘beginner-cook’, ‘broccoli’]</td>
      <td style="text-align: right">6</td>
      <td style="text-align: left">[‘preheat oven to 350 degrees’, ‘spray a 2 quart baking dish with cooking spray , set aside’, ‘in a large bowl mix together broccoli , soup , one cup of cheese , garlic powder , pepper , salt , milk , 1 cup of french onions , and soy sauce’, ‘pour into baking dish , sprinkle remaining cheese over top’, ‘bake for 25 minutes or until cheese is lightly browned’, ‘sprinkle with rest of french fried onions and bake until onions are browned and cheese is bubbly , about 10 more minutes’]</td>
      <td style="text-align: left">since there are already 411 recipes for broccoli casserole posted to “zaar” ,i decided to call this one #412 broccoli casserole.i don’t think there are any like this one in the database. i based this one on the famous “green bean casserole” from campbell’s soup. but i think mine is better since i don’t like cream of mushroom soup.submitted to “zaar” on may 28th,2008</td>
      <td style="text-align: left">[‘frozen broccoli cuts’, ‘cream of chicken soup’, ‘sharp cheddar cheese’, ‘garlic powder’, ‘ground black pepper’, ‘salt’, ‘milk’, ‘soy sauce’, ‘french-fried onions’]</td>
      <td style="text-align: right">9</td>
      <td style="text-align: right">194.8</td>
      <td style="text-align: right">20</td>
      <td style="text-align: right">6</td>
      <td style="text-align: right">32</td>
      <td style="text-align: right">22</td>
      <td style="text-align: right">36</td>
      <td style="text-align: right">3</td>
      <td style="text-align: right">1.19628e+06</td>
      <td style="text-align: right">306168</td>
      <td style="text-align: left">2009-04-13</td>
      <td style="text-align: right">5</td>
      <td style="text-align: left">I made this for my son’s first birthday party this weekend. Our guests INHALED it! Everyone kept saying how delicious it was. I was I could have gotten to try it.</td>
      <td style="text-align: right">5</td>
      <td style="text-align: right">2009</td>
    </tr>
    <tr>
      <td style="text-align: left">412 broccoli casserole</td>
      <td style="text-align: right">306168</td>
      <td style="text-align: right">40</td>
      <td style="text-align: right">50969</td>
      <td style="text-align: left">2008-05-30</td>
      <td style="text-align: left">[‘60-minutes-or-less’, ‘time-to-make’, ‘course’, ‘main-ingredient’, ‘preparation’, ‘side-dishes’, ‘vegetables’, ‘easy’, ‘beginner-cook’, ‘broccoli’]</td>
      <td style="text-align: right">6</td>
      <td style="text-align: left">[‘preheat oven to 350 degrees’, ‘spray a 2 quart baking dish with cooking spray , set aside’, ‘in a large bowl mix together broccoli , soup , one cup of cheese , garlic powder , pepper , salt , milk , 1 cup of french onions , and soy sauce’, ‘pour into baking dish , sprinkle remaining cheese over top’, ‘bake for 25 minutes or until cheese is lightly browned’, ‘sprinkle with rest of french fried onions and bake until onions are browned and cheese is bubbly , about 10 more minutes’]</td>
      <td style="text-align: left">since there are already 411 recipes for broccoli casserole posted to “zaar” ,i decided to call this one #412 broccoli casserole.i don’t think there are any like this one in the database. i based this one on the famous “green bean casserole” from campbell’s soup. but i think mine is better since i don’t like cream of mushroom soup.submitted to “zaar” on may 28th,2008</td>
      <td style="text-align: left">[‘frozen broccoli cuts’, ‘cream of chicken soup’, ‘sharp cheddar cheese’, ‘garlic powder’, ‘ground black pepper’, ‘salt’, ‘milk’, ‘soy sauce’, ‘french-fried onions’]</td>
      <td style="text-align: right">9</td>
      <td style="text-align: right">194.8</td>
      <td style="text-align: right">20</td>
      <td style="text-align: right">6</td>
      <td style="text-align: right">32</td>
      <td style="text-align: right">22</td>
      <td style="text-align: right">36</td>
      <td style="text-align: right">3</td>
      <td style="text-align: right">768828</td>
      <td style="text-align: right">306168</td>
      <td style="text-align: left">2013-08-02</td>
      <td style="text-align: right">5</td>
      <td style="text-align: left">Loved this. Be sure to completely thaw the broccoli. I didn't and it didn't get done in time specified. Just cooked it a little longer though and it was perfect. Thanks Chef.</td>
      <td style="text-align: right">5</td>
      <td style="text-align: right">2013</td>
    </tr>
  </tbody>
</table>

<h3 id="univariate-analysis">Univariate Analysis</h3>

<h4 id="plotly-plot-1-histogram-distribution-of-average-ratings-avg_rating"><code class="language-plaintext highlighter-rouge">plotly</code> Plot 1: <strong>Histogram</strong>: Distribution of average ratings (<code class="language-plaintext highlighter-rouge">avg_rating</code>):</h4>

<p>The histogram shows that the distribution of average recipe ratings is <strong>left-skewed</strong>, with most recipes receiving high ratings. However, there is a noticable drop between the number of recipes with an <strong>average rating of 4.5</strong> and those with a <strong>perfect 5.0</strong>, suggesting that while many recipes are well-received, far fewer consistently earn top marks.</p>

<iframe src="assets/fig1.html" width="800" height="600" frameborder="0"></iframe>

<h4 id="plotly-plot-2-histogram-distribution-of-the-number-of-steps-n_steps"><code class="language-plaintext highlighter-rouge">plotly</code> Plot 2: <strong>Histogram</strong>: Distribution of the number of steps (<code class="language-plaintext highlighter-rouge">n_steps</code>):</h4>

<p>The histogram of recipe steps is <strong>right-skewed</strong>, indicating that while some recipes are quite complex, the majority involve a manageable <strong>5 to 10 steps</strong>. The aforementioned trend suggests that most users tend to submit relatively simple recipes - which may attract more reviews and higher ratings due to their accessibility, a factor worth considering when exploring the relationship between review count and average rating.</p>

<iframe src="assets/fig2.html" width="800" height="600" frameborder="0"></iframe>

<h3 id="bivariate-analysis">Bivariate Analysis</h3>

<h4 id="plotly-plot-3-scatter-plot-relationship-between-the-number-of-reviews-review-count-and-average-rating-avg_rating"><code class="language-plaintext highlighter-rouge">plotly</code> Plot 3: <strong>Scatter Plot</strong>: Relationship between the number of reviews (<code class="language-plaintext highlighter-rouge">review</code> count) and average rating (<code class="language-plaintext highlighter-rouge">avg_rating</code>)</h4>

<p>The scatter plot shows that most recipes cluster around <strong>20 to 40 reviews</strong> with <strong>average ratings between 4 and 5</strong>. While this aforementioned trend suggests that popular recipes tend to be highly rated, the relatively flat trend line indicates <strong>no strong linear relationship</strong> between review count and average rating - implying that simply having more reviews does not necessarily mean a recipe is rated higher.</p>

<iframe src="assets/fig3.html" width="800" height="600" frameborder="0"></iframe>

<h4 id="plotly-plot-4-bar-chart-distribution-of-the-average-percentage-of-daily-value-in-sugar-sugar_pdv-for-recipes-at-or-below-2000-calories-in-recipes-by-year-year"><code class="language-plaintext highlighter-rouge">plotly</code> Plot 4: <strong>Bar Chart</strong>: Distribution of the average percentage of daily value in sugar (<code class="language-plaintext highlighter-rouge">sugar_PDV</code>) for recipes at or below 2,000 calories in recipes by year (<code class="language-plaintext highlighter-rouge">year</code>)</h4>

<p>The bar chart reveals that the <strong>average sugar percentage of daily value</strong> in recipes has remained relatively stable since 2008, but shows a noticable <strong>increase beginning around 2015</strong>, with peaks in <strong>2015 and 2018</strong>. The aforementioned trend suggests that in recent years, users may have submitted <strong>sweeter or less health-conscious recipes</strong>. To ensure a more accurate representation of recipes, this analysis only includes recipes with <strong>2,000 calories or fewer</strong> as those above that threshold contained <strong>extreme outliers in sugar content</strong> that skewed the data.</p>

<iframe src="assets/fig4.html" width="800" height="600" frameborder="0"></iframe>

<h3 id="interesting-aggregates">Interesting Aggregates</h3>

<p>Here’s a pivot table that summarizes the year trends (<code class="language-plaintext highlighter-rouge">year</code>) in recipe reviews (<code class="language-plaintext highlighter-rouge">review</code> count) and average ratings (<code class="language-plaintext highlighter-rouge">avg_rating</code>):</p>

<table>
  <thead>
    <tr>
      <th style="text-align: right">year</th>
      <th style="text-align: right">avg_rating</th>
      <th style="text-align: right">review</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td style="text-align: right">2008</td>
      <td style="text-align: right">4.62743</td>
      <td style="text-align: right">31593</td>
    </tr>
    <tr>
      <td style="text-align: right">2009</td>
      <td style="text-align: right">4.67466</td>
      <td style="text-align: right">48420</td>
    </tr>
    <tr>
      <td style="text-align: right">2010</td>
      <td style="text-align: right">4.70223</td>
      <td style="text-align: right">36970</td>
    </tr>
    <tr>
      <td style="text-align: right">2011</td>
      <td style="text-align: right">4.70723</td>
      <td style="text-align: right">29187</td>
    </tr>
    <tr>
      <td style="text-align: right">2012</td>
      <td style="text-align: right">4.73037</td>
      <td style="text-align: right">23827</td>
    </tr>
    <tr>
      <td style="text-align: right">2013</td>
      <td style="text-align: right">4.70944</td>
      <td style="text-align: right">21849</td>
    </tr>
    <tr>
      <td style="text-align: right">2014</td>
      <td style="text-align: right">4.68466</td>
      <td style="text-align: right">12580</td>
    </tr>
    <tr>
      <td style="text-align: right">2015</td>
      <td style="text-align: right">4.6112</td>
      <td style="text-align: right">8206</td>
    </tr>
    <tr>
      <td style="text-align: right">2016</td>
      <td style="text-align: right">4.59224</td>
      <td style="text-align: right">5999</td>
    </tr>
    <tr>
      <td style="text-align: right">2017</td>
      <td style="text-align: right">4.59481</td>
      <td style="text-align: right">8825</td>
    </tr>
    <tr>
      <td style="text-align: right">2018</td>
      <td style="text-align: right">4.59397</td>
      <td style="text-align: right">6915</td>
    </tr>
  </tbody>
</table>

<p>The pivot table summarizes <strong>yearly trends in both average recipe ratings and total review counts</strong>, providing a broader view of how user engagement and user perceptions have evolved over time. By tracking these metrics from year to year, I can identify periods of <strong>increased activity or shifting user preferences</strong> - which helps contextualize my main question about the relationship between <strong>review count</strong> and <strong>average rating</strong>. For example, a rise in review volume without a corresponding increase in average rating could suggest that more reviews don’t always translate to higher recipe approval.</p>

<h3 id="imputation">Imputation</h3>

<p>Only the missing values in the <code class="language-plaintext highlighter-rouge">rating</code> column needed to be imputed with a value of <code class="language-plaintext highlighter-rouge">Na.N</code> because the <code class="language-plaintext highlighter-rouge">rating</code> column was the only column from the <code class="language-plaintext highlighter-rouge">RAW_interactions.csv</code> dataset that contained missing values for some of the rows.</p>

<h2 id="framing-a-prediction-problem">Framing a Prediction Problem</h2>

<h3 id="problem-identification">Problem Identification</h3>

<p>The goal of my prediction task is to <strong>predict the average rating</strong> (<code class="language-plaintext highlighter-rouge">avg_rating</code>) that a recipe receives based on various features such as the number of reviews, ingredients, nutritional values, and more. Because <code class="language-plaintext highlighter-rouge">avg_rating</code> is a <strong>continuous numerical variable</strong>, this is a <strong>regression problem</strong>.</p>

<ul>
  <li>
    <p>Response Variable: The response variable I am predicting is <code class="language-plaintext highlighter-rouge">avg_rating</code>.
<br />
I chose this variable because it reflects how positively a recipe is perceived by users, and predicting the average rating can help identify what kinds of recipes are most likely to be rated highly.</p>
  </li>
  <li>
    <p>Evaluation Metric: I am using the <strong>coefficient of determination (R<sup>2</sup>)</strong> to evaluate my model’s performance.
<br />
The R<sup>2</sup> value measures the proportion of variance in the response variable that can be explained by the features used in the model. I chose R<sup>2</sup> over other regression metrics (like Mean Absolute Error (MAE) or Root Mean Square Error (RMSE)) because it provides an interpretable measure of <strong>how well the model captures the variability in recipe ratings</strong>, which is especially useful when comparing different models or feature sets.</p>
  </li>
</ul>

<h3 id="baseline-model">Baseline Model</h3>

<p>For my baseline model, I used a <strong>linear regression</strong> approach to predict the <code class="language-plaintext highlighter-rouge">avg_rating</code> of a recipe based on two features:</p>

<ul>
  <li><code class="language-plaintext highlighter-rouge">review_count</code>: The number of user-submitted reviews per recipe</li>
  <li><code class="language-plaintext highlighter-rouge">calories</code>: The total calorie content of the recipe</li>
</ul>

<p>Both features are <strong>quantitative variables</strong>. Because the model uses only numeric data, no encoding (such as one-hot encoding) was necessary.</p>

<p>After splitting the data into training and testing sets (80% train, 20% test), I evaluated model performance using the <strong>R<sup>2</sup></strong> metric. This metric tells me how well the model explains variability in the response variable.</p>

<p>The R<sup>2</sup> score value for the baseline model is <strong>0.0003</strong>; this value is extremely low - close to zero - which means that the model explains <strong>virtually none of the variance</strong> in average recipe ratings. The aforementioned interpretation of the R<sup>2</sup> score value for the baseline model suggests that simply knowing how many reviews a recipe has and its calorie content is <strong>not sufficient</strong> to accurately predict the recipe’s rating. Therefore, I do <strong>not</strong> consider this baseline model to be good. This model serves primarily as a starting point for comparison as I explore more complex models and richer sets of features.</p>

<h3 id="final-model">Final Model</h3>

<p>For my final model, I introduced two additional features: <code class="language-plaintext highlighter-rouge">protein_PDV</code> (percentage of daily value of protein) and <code class="language-plaintext highlighter-rouge">n_ingredients</code> (number of ingredients) in a recipe. I chose these features because they both provide valuable nutritional and complexity-related information about each recipe. Recipes that are high in protein or require more ingredients may influence user satisfaction and perceived quality, which in turn could affect their average ratings. Including these variables helps capture underlying patterns in the data that go beyond the number of calories and review frequency for a recipe, which were used in the baseline model.</p>

<p>To model the prediction task, I used a <strong>Random Forest Regressor</strong>, a non-linear ensemble method that is well-suited for capturing complex relationships in the data. The aforementioned choice was motivated by the fact that user ratings can be influenced by a combination of interactions that a linear model might not be able to capture.</p>

<p>I applied preprocessing using a <code class="language-plaintext highlighter-rouge">ColumnTransformer</code>:</p>

<ul>
  <li>I <strong>standardized</strong> numeric features (<code class="language-plaintext highlighter-rouge">calories</code>, <code class="language-plaintext highlighter-rouge">protein_PDV</code>, and <code class="language-plaintext highlighter-rouge">n_ingredients</code>) using <code class="language-plaintext highlighter-rouge">StandardScaler</code>.</li>
  <li>I <strong>normalized</strong> the highly skewed <code class="language-plaintext highlighter-rouge">review_count</code> using <code class="language-plaintext highlighter-rouge">QuantileTransformer</code> with a normal output distribution.</li>
</ul>

<p>I then used <strong>GridSearchCV</strong> to tune the hyperparameters of the Random Forest model. The best hyperparameters from the grid search were:</p>

<ul>
  <li><code class="language-plaintext highlighter-rouge">n_estimators</code>: 100</li>
  <li><code class="language-plaintext highlighter-rouge">max_depth</code>: None</li>
  <li><code class="language-plaintext highlighter-rouge">min_sample_split</code>: 2</li>
</ul>

<p>I selected the best model by evaluating its performance using 5-fold cross-validation, with the R<sup>2</sup> metric as the evaluation metric. The R<sup>2</sup> metric is an appropriate metric for regression tasks because it quantifies how much of the variance in the response variable is explained by the model.</p>

<p>The final model achieved an R<sup>2</sup> score of <strong>0.4502</strong>, a substantial improvement over the baseline model’s R<sup>2</sup> score of 0.0003. The improvement in the R<sup>2</sup> score suggrsts that incorporating domain knowledge through new features and using a more expressive model significantly improved the model’s ability to predict average recipe ratings.</p>


            
        </div> <!-- .container-lg -->

        
    </body>
</html>
